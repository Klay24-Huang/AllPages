<!doctype html>
<html lang="zh-TW">

<head>
    <title>BMI</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet"
          href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/js/bootstrap.min.js"></script>




    <script>
        function Show( msg ) {
            document.getElementById( 'Label1' ).innerHTML += msg + "<br />";
        }

        function Button1_Click() {
            let height = document.getElementById( 'txbHeight' ).value;
            let weight = document.getElementById( 'txbWeight' ).value;
            let bmi = GetBmi( height, weight );
            Show( "BMI :" + bmi );
        }

        //function GetBmi(height, weight) {
        //    let bmi = 0;
        //    H = height / 100;
        //    bmi = weight / (H * H);
        //    return bmi;
        //}
        //前端計算用

        function GetBmi( height, weight ) {
            $.ajax( {
                type: "POST",
                url: "/api/bmi",
                data: {
                    "height": height,
                    "weight": weight
                }
                ,
                dataType: "json",
                success: function ( response ) {
                    console.log( response );
                    $( '#Label1' ).html( response.BMI );

                }
            } );
            //console.log( `response is ${response}` );
            //console.log( `response.BMI is ${response.BMI}` );
        }
    </script>
</head>

<body>


    <div class="row">
        <div class="col-md-6">
            <form action="" class="form-group">
                <label>身高:</label><br>
                <input id="txbHeight" type="text" placeholder="輸入身高" /><br>
                <label>體重:</label><br>
                <input id="txbWeight" type="text" placeholder="輸入體重" /><br>
                <label id="Label1">結果:</label>
                <input class="btn btn-primary" type="button" id="Button1" onclick="Button1_Click();" value="計算" />
            </form>
        </div>
    </div>

</body>

</html>